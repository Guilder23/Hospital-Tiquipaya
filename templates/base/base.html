<!DOCTYPE html>
<html lang="es">
<head>
{% load static %}
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Hospital Tiquipaya</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
<link rel="stylesheet" href="{% static 'css/base/base.css' %}">
<link rel="stylesheet" href="{% static 'css/registration/login.css' %}">
<link rel="stylesheet" href="{% static 'css/registration/register.css' %}">
{% block extra_css %}{% endblock %}
</head>
<body>
<header class="site-header">
  <h1>Hospital Tiquipaya</h1>
  <nav>
    <a href="/">Inicio</a>
    {% if paciente %}
      <span class="user-info">Paciente: {{ paciente.nombres }} {{ paciente.apellido_paterno }}</span>
      <a href="/citas/logout/" class="user-info">Cerrar sesión</a>
    {% elif request.user.is_authenticated %}
      <span class="user-info">{{ request.user.username }} {% if request.user.perfil.tipo %}<span class="user-role">({{ request.user.perfil.tipo.nombre }})</span>{% endif %}</span>
      <form class="logout-form" method="post" action="/accounts/logout/">
        {% csrf_token %}
        <button type="submit">Salir</button>
      </form>
    {% else %}
      <a href="#" onclick="toggleRegisterModal(); return false;">Registrarse</a>
      <a href="#" onclick="toggleLoginModal(); return false;">Ingresar</a>
    {% endif %}
  </nav>
</header>
<div class="layout">
  {% if paciente %}
  <aside class="sidebar">
    <div class="sidebar-header">Paciente</div>
      <a class="sidebar-link" href="/citas/agendar/">Agendar cita</a>
      <a class="sidebar-link" href="/citas/mis/">Mis Citas</a>
      <a class="sidebar-link" href="/pacientes/mis-citas-atendidas/"><i class="fas fa-history"></i> Historial</a>
  </aside>
  {% elif request.user.is_authenticated and request.user.medico %}
  <aside class="sidebar">
    <div class="sidebar-header">Médico</div>
      <a class="sidebar-link" href="/citas/medico/hoy/">Mis Citas Hoy</a>
      <a class="sidebar-link" href="/citas/medico/atendidos/">Pacientes Atendidos</a>
      <a class="sidebar-link" href="/">Dashboard</a>
  </aside>
  {% elif request.user.is_authenticated %}
  <aside class="sidebar">
    <div class="sidebar-header">Menú</div>
      <a class="sidebar-link" href="/accounts/tipos/">Gestionar tipos de usuario</a>
      <a class="sidebar-link" href="/accounts/usuarios/">Gestionar usuarios</a>
      <a class="sidebar-link" href="/especialidades/">Gestionar especialidades</a>
      <a class="sidebar-link" href="/pacientes/">Gestionar pacientes</a>
      <a class="sidebar-link" href="/ecografias/">Gestionar ecografías</a>
  </aside>
  {% endif %}
  <main class="content">
    {% block content %}{% endblock %}
  </main>
 </div>
  {% include 'registration/login.html' %}
  {% include 'registration/register.html' %}
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="{% static 'js/base/base.js' %}"></script>
<script src="{% static 'js/registration/login.js' %}"></script>
<script src="{% static 'js/registration/register.js' %}"></script>
{% block extra_js %}{% endblock %}
</body>
</html>
