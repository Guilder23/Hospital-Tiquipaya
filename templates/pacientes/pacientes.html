{% extends "base.html" %}
{% block extra_css %}
<link rel="stylesheet" href="/static/css/pacientes/pacientes.css">
<link rel="stylesheet" href="/static/css/pacientes/modals/create.css">
<link rel="stylesheet" href="/static/css/pacientes/modals/edit.css">
<link rel="stylesheet" href="/static/css/pacientes/modals/view.css">
<link rel="stylesheet" href="/static/css/pacientes/modals/delete.css">
{% endblock %}
{% block content %}
<section class="card pacientes-lista">
  <h2>Lista Paciente</h2>
  {% if puede_admin %}
  <p><button class="btn" id="btn-open-create">Nuevo paciente</button></p>
  {% endif %}
  <table class="table pacientes">
    <thead>
      <tr>
        <th>CI</th>
        <th>Nombre</th>
        <th>Teléfono</th>
        <th>Email</th>
        <th>Seguro</th>
        <th>Estado</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      {% for p in pacientes %}
      <tr data-id="{{ p.id }}" data-ci="{{ p.ci }}" data-ci_complemento="{{ p.ci_complemento }}" data-expedido="{{ p.expedido }}" data-nombres="{{ p.nombres }}" data-apellido_paterno="{{ p.apellido_paterno }}" data-apellido_materno="{{ p.apellido_materno }}" data-fecha_nacimiento="{{ p.fecha_nacimiento }}" data-genero="{{ p.genero }}" data-nacionalidad="{{ p.nacionalidad }}" data-telefono_fijo="{{ p.telefono_fijo }}" data-celular="{{ p.celular }}" data-email="{{ p.email }}" data-zona="{{ p.zona }}" data-calle="{{ p.calle }}" data-numero_domicilio="{{ p.numero_domicilio }}" data-direccion="{{ p.direccion }}" data-tiene_seguro="{{ p.tiene_seguro }}" data-numero_seguro="{{ p.numero_seguro }}" data-emergencia_nombre="{{ p.emergencia_nombre }}" data-emergencia_telefono="{{ p.emergencia_telefono }}" data-emergencia_relacion="{{ p.emergencia_relacion }}" data-numero_boleta_sus="{{ p.numero_boleta_sus }}" data-numero_carnet_historial="{{ p.numero_carnet_historial }}" data-numero_boleta_referencia="{{ p.numero_boleta_referencia }}" data-numero_copias="{{ p.numero_copias }}" data-activo="{{ p.activo }}" data-registrado_en="{{ p.registrado_en }}">
        <td>{{ p.ci }}</td>
        <td>{{ p.apellido_paterno }} {{ p.apellido_materno }} {{ p.nombres }}</td>
        <td>{{ p.celular }}</td>
        <td>{{ p.email }}</td>
        <td>
          {% if p.tiene_seguro %}
            <span class="badge badge-success">Sí</span>
          {% else %}
            <span class="badge badge-muted">No</span>
          {% endif %}
        </td>
        <td>
          {% if p.activo %}
            <span class="badge badge-activo">Activo</span>
          {% else %}
            <span class="badge badge-inactivo">Inactivo</span>
          {% endif %}
        </td>
        <td class="actions">
          <button class="btn btn-view" data-id="{{ p.id }}">Ver</button>
          {% if puede_admin %}
          <button class="btn btn-edit" data-id="{{ p.id }}">Editar</button>
          <button class="btn btn-delete" data-id="{{ p.id }}" data-ci="{{ p.ci }}">Eliminar</button>
          {% endif %}
        </td>
      </tr>
      {% empty %}
      <tr><td colspan="7">Sin pacientes</td></tr>
      {% endfor %}
    </tbody>
  </table>
</section>

{% include 'pacientes/modals/create.html' %}

{% include 'pacientes/modals/edit.html' %}

{% include 'pacientes/modals/view.html' %}

{% include 'pacientes/modals/delete.html' %}
{% endblock %}
{% block extra_js %}
<script src="/static/js/pacientes/modals/create.js"></script>
<script src="/static/js/pacientes/modals/edit.js"></script>
<script src="/static/js/pacientes/modals/view.js"></script>
<script src="/static/js/pacientes/modals/delete.js"></script>
{% endblock %}